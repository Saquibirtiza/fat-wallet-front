(this["webpackJsonpfat-wallet-front"]=this["webpackJsonpfat-wallet-front"]||[]).push([[0],{252:function(e,t,a){e.exports=a.p+"static/media/Wallet.317f2277.png"},253:function(e,t,a){e.exports=a.p+"static/media/error.14609ef0.svg"},423:function(e,t,a){},583:function(e,t,a){e.exports=a(921)},589:function(e,t,a){},590:function(e,t,a){},774:function(e,t,a){},775:function(e,t,a){},776:function(e,t,a){},919:function(e,t,a){},920:function(e,t,a){},921:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(19),o=a.n(s),l=(a(588),a(589),a(590),a(32)),i=a(33),c=a(30),m=a(35),u=a(34),d=a(252),h=a.n(d),p=a(119),f=(a(591),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={remove:!n.props.navState,propUpdateCount:0},n.propUpdateCount=0,n.navItemActive="nav-item active",n.navItemDisabled="nav-item disabled",n.navLinkActive="nav-link active",n.navLinkDisabled="nav-link",n}return Object(i.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=this;console.log(e,this.props),this.props.navState!=e.navState&&this.setState({remove:!this.state.remove,propUpdateCount:1},(function(){return console.log(t.state.remove)})),console.log(this.state.propUpdateCount)}},{key:"prevent",value:function(e){e.preventDefault()}},{key:"allow",value:function(){return!1}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light"},r.a.createElement("img",{class:"px-2",src:h.a,width:"50",alt:"cant find"}),r.a.createElement(p.b,{id:"Link",to:{pathname:"/home",state:{name:this.props.location.state.name}},onClick:function(t){!0===e.state.remove?e.prevent(t):e.allow()}},r.a.createElement("a",{class:"navbar-brand",href:"#"},"Fat Wallet")),r.a.createElement("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{class:"navbar-toggler-icon"})),r.a.createElement("div",{class:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{class:"navbar-nav ml-auto"},r.a.createElement(p.b,{id:"Link",to:{pathname:"/home",state:{name:this.props.location.state.name}},onClick:function(t){!0===e.state.remove?e.prevent(t):e.allow()}},r.a.createElement("li",{class:!1===this.state.remove?this.navItemActive:this.navItemDisabled},r.a.createElement("a",{class:!1===this.state.remove?this.navLinkActive:this.navLinkDisabled,href:"#"},"Home"))),r.a.createElement(p.b,{id:"Link",to:{pathname:"/expenses",state:{name:this.props.location.state.name}},onClick:function(t){!0===e.state.remove?e.prevent(t):e.allow()}},r.a.createElement("li",{class:!1===this.state.remove?this.navItemActive:this.navItemDisabled},r.a.createElement("a",{class:!1===this.state.remove?this.navLinkActive:this.navLinkDisabled,href:"#"},"Expenses"))),r.a.createElement(p.b,{id:"Link",to:{pathname:"/",state:{signedOut:!0}},onClick:function(t){!0===e.state.remove?e.prevent(t):e.allow()}},r.a.createElement("li",{class:!1===this.state.remove?this.navItemActive:this.navItemDisabled},r.a.createElement("a",{class:!1===this.state.remove?this.navLinkActive:this.navLinkDisabled,href:"#"},"Sign Out")))))))}}]),a}(r.a.Component)),g=a(106),v=a(357),y=a.n(v),b=a(524),E=a(955),S=a(358),x=a.n(S),k=a(944),O=a(253),C=a.n(O),j=(a(423),a(67)),N=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={data:[],currentUser:e.username,graphState:-1},n.fetchRefresh=n.fetchRefresh.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"refresh",value:function(e,t){this.setState({graphState:1}),e=parseFloat(e);var a=x()(),n=x()(t);console.log(a);for(var r=!1,s="",o=5;0!==o;)a.month()===n.month()&&a.year()===n.year()?(r=!0,s=a.format("MMMM")):a.subtract(1,"month"),o-=1;if(r){var l,i=this.state.data;for(l=0;l<i.length;l++)s===i[l].name&&(i[l].value+=e)}localStorage.setItem("barVal",JSON.stringify(i));var c=JSON.parse(localStorage.getItem("barVal"));this.setState({data:c})}},{key:"fetchRefresh",value:function(){var e=this;fetch("https://upper-inukshuk-26953.herokuapp.com/monthly_user_data",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({username:this.state.currentUser,duration:5,month_or_week:1})}).then((function(e){return e.json()})).then((function(t){var a=[],n=0;for(var r in t)n+=t[r],a.push({name:r,value:t[r]});localStorage.setItem("barVal",JSON.stringify(a)),e.setState({data:a},(function(){localStorage.setItem("ghState",JSON.stringify(n)),e.setState({graphState:parseFloat(n)})}))}))}},{key:"componentDidMount",value:function(){if(null!==localStorage.getItem("barVal")&&"false"===localStorage.getItem("eBar")){var e=JSON.parse(localStorage.getItem("barVal")),t=JSON.parse(localStorage.getItem("ghState"));console.log(t),this.setState({data:e}),this.setState({graphState:parseFloat(t)})}else this.fetchRefresh(),localStorage.setItem("eBar",!1)}},{key:"render",value:function(){return this.state.graphState>0?r.a.createElement("div",null,r.a.createElement(j.g,{width:"99%",height:650},r.a.createElement(j.b,{data:this.state.data,margin:{top:5,right:30,left:20,bottom:5}},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"100%",spreadMethod:"reflect"},r.a.createElement("stop",{offset:"0",stopColor:"#f28f6d"}),r.a.createElement("stop",{offset:"1",stopColor:"#df622c"}))),r.a.createElement(j.c,{strokeDasharray:"3 3"}),r.a.createElement(j.i,{dataKey:"name"}),r.a.createElement(j.j,null),r.a.createElement(j.h,null),r.a.createElement(j.d,null),r.a.createElement(j.a,{dataKey:"value",fill:"url(#colorUv)"})))):0==this.state.graphState?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("img",{class:"center",src:C.a,alt:"React Logo"})),r.a.createElement("label",{className:"lh-copy white f5 center",style:{display:"flex",justifyContent:"center",textTransform:"uppercase",padding:"5vh",width:"100%",fontSize:"3vh"}},"No Data to show")):r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(k.a,{width:"99%",height:750,animation:"border",role:"status",style:{textAlign:"center",marginTop:"30%",marginBottom:"30%"}},r.a.createElement("span",{className:"sr-only"},"Loading...")))}}]),a}(r.a.Component),w=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={data:[],currentUser:e.username,graphState:-1},n.refresh=n.refresh.bind(Object(c.a)(n)),n.fetchRefresh=n.fetchRefresh.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"refresh",value:function(e,t){var a,n=this.state.data,r=!1;for(a=0;a<n.length;a++)t===n[a].name&&(n[a].value+=parseFloat(e),r=!0,console.log("found"));r||(n.push({name:t,value:parseFloat(e)}),console.log("not found")),localStorage.setItem("pieVal",JSON.stringify(n));var s=JSON.parse(localStorage.getItem("pieVal"));this.setState({data:s})}},{key:"fetchRefresh",value:function(){var e=this;fetch("https://upper-inukshuk-26953.herokuapp.com/category_wise_user_data",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({username:this.state.currentUser})}).then((function(e){return e.json()})).then((function(t){var a=[],n=0;for(var r in t)n+=t[r],a.push({name:r,value:t[r]});localStorage.setItem("pieVal",JSON.stringify(a)),e.setState({data:a},(function(){localStorage.setItem("ghState",JSON.stringify(n)),e.setState({graphState:n})}))}))}},{key:"componentDidUpdate",value:function(e){JSON.parse(localStorage.getItem("pieVal"))}},{key:"componentDidMount",value:function(){if(null!==localStorage.getItem("pieVal")&&"false"===localStorage.getItem("ePie")){var e=JSON.parse(localStorage.getItem("pieVal")),t=JSON.parse(localStorage.getItem("ghState"));this.setState({data:e}),this.setState({graphState:t})}else this.fetchRefresh(),localStorage.setItem("ePie",!1)}},{key:"render",value:function(){return this.state.graphState>0?r.a.createElement("div",null,r.a.createElement(j.g,{width:"99%",height:650},r.a.createElement(j.f,null,r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"100%",spreadMethod:"reflect"},r.a.createElement("stop",{offset:"0",stopColor:"#f28f6d"}),r.a.createElement("stop",{offset:"1",stopColor:"#df622c"}))),r.a.createElement(j.e,{dataKey:"value",data:this.state.data,fill:"url(#colorUv)",label:!0,cx:"50%",cy:"50%",outerRadius:"80%",innerRadius:"50%"}),r.a.createElement(j.h,null)))):0==this.state.graphState?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("img",{class:"center",src:C.a,alt:"React Logo"})),r.a.createElement("label",{className:"lh-copy white f5 center",style:{display:"flex",width:"100%",justifyContent:"center",textTransform:"uppercase",padding:"5vh",fontSize:"3vh"}},"No Data to show")):r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(k.a,{width:"99%",height:650,animation:"border",role:"status",style:{textAlign:"center",marginTop:"30%",marginBottom:"30%"}},r.a.createElement("span",{className:"sr-only"},"Loading...")))}}]),a}(r.a.Component);function I(e){var t=e.cB,a=e.cP,n=e.choice,s=e.user;return"Expenses by Month"===n?r.a.createElement(N,{ref:t,username:s}):r.a.createElement(w,{ref:a,username:s})}function F(e){var t,a="",n=[["Good Morning, ",6,12],["Good Afternoon, ",12,18],["Good Evening, ",18,21],["Good Night, ",21,24]],s=(new Date).getHours(),o=e.user;for(t=0;t<3;t++)if(a=n[t][0].concat(o),s>n[t][1]&s<=n[t][2])return r.a.createElement("h3",{style:{padding:"3vh"}},a);return a=n[3][0].concat(o),r.a.createElement("h3",{style:{paddingTop:"3vh",paddingBottom:"1vh",paddingLeft:"3vh"}},a)}var J=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={choice:"Expenses by Month",time_of_day:"",firstName:""},n.handleSelect=n.handleSelect.bind(Object(c.a)(n)),n.childPie=r.a.createRef(),n.childBar=r.a.createRef(),n}return Object(i.a)(a,[{key:"triggerUpdate",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n?(this.childBar.current.fetchRefresh(),this.childPie.current.fetchRefresh()):"Expenses by Month"===this.state.choice?this.childBar.current.refresh(e,t):this.childPie.current.refresh(e,a)}},{key:"handleSelect",value:function(e){this.setState({choice:e}),localStorage.setItem("choice",e)}},{key:"componentDidMount",value:function(){var e=Object(b.a)(y.a.mark((function e(){var t,a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=(t=localStorage.getItem("choice"))&&this.setState({choice:t}),e.next=4,fetch("https://upper-inukshuk-26953.herokuapp.com/give_name",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({username:this.props.username})});case 4:return a=e.sent,e.next=7,a.text();case 7:n=e.sent,this.setState({firstName:n});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e;return r.a.createElement("div",{style:{width:"100vh"}},r.a.createElement(F,{user:this.state.firstName}),r.a.createElement(E.a,{name:"category",value:this.choice,onSelect:this.handleSelect},r.a.createElement(E.a.Toggle,{style:(e={width:"100%",color:"black",backgroundColor:"transparent",outline:"none",border:"none"},Object(g.a)(e,"outline","none !important"),Object(g.a)(e,"boxshadow","none"),e),variant:"primary",id:"dropdown-basic"},r.a.createElement("p",{style:{fontSize:"3vh"}},this.state.choice)),r.a.createElement(E.a.Menu,{style:{width:"100%",justifyContent:"center"}},r.a.createElement(E.a.Item,{eventKey:"Expenses by Month"},"Expenses by Month"),r.a.createElement(E.a.Item,{eventKey:"Expenses by Category"},"Expenses by Category"))),r.a.createElement(I,{cB:this.childBar,cP:this.childPie,choice:this.state.choice,user:this.props.username}))}}]),a}(r.a.Component),U=(a(774),a(775),a(776),a(544)),T=a.n(U),M=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.totExp,t=this.props.expCat;return r.a.createElement("div",{style:{display:"flex",flexdirection:"row",justifyContent:"center",width:"80vw",maxWidth:"700px"}},r.a.createElement("div",{class:"card-deck card-margin"},r.a.createElement("div",{class:"card bg-warning card-rounded"},r.a.createElement("div",{class:"card-body text-center"},r.a.createElement("h3",{class:"card-text"},"Total Expense:"),r.a.createElement("h3",null,r.a.createElement(T.a,{format:"(,ddd).dd",value:e})))),r.a.createElement("div",{class:"card bg-warning card-rounded"},r.a.createElement("div",{class:"card-body text-center"},r.a.createElement("h3",{class:"card-text"},"Most Spent On: ",t)))))}}]),a}(r.a.Component),L=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),n=t.call(this,e);var r=new Date,s=r.getDate(),o=r.getMonth()+1,i=r.getFullYear();return n.newstring="".concat(i).concat("-").concat(o<10?"0".concat(o):"".concat(o)).concat("-").concat(s),n.state={name:"",amount:0,category:"",date:n.newstring,description:"",user:e.username,allcategories:[],displayText:"",added:0},n.selectedCat="Choose an Option",n.categories=["Food","Utilites","Commute","Entertainment"],n.handleClick=n.handleClick.bind(Object(c.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(c.a)(n)),n.handleChange=n.handleChange.bind(Object(c.a)(n)),n.handleSelect=n.handleSelect.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("https://upper-inukshuk-26953.herokuapp.com/category_data",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({username:this.state.user})}).then((function(e){return e.json()})).then((function(t){var a,n=[];for(a=0;a<t.length;a++)n.push(t[a].category);e.setState({allcategories:n})}))}},{key:"handleClick",value:function(e){this.props.callbackFromParent(!0)}},{key:"componentWillReceiveProps",value:function(e){this.setState({added:0})}},{key:"conditionalCSS",value:function(){var e=this,t=0;Object.keys(this.state).map((function(a){t<=3&&(""!==e.state[a]&&0!==e.state[a]||(document.getElementById(a).style.color="red")),t+=1}))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),""!==this.state.name&&0!==this.state.amount&&""!==this.state.category?(localStorage.setItem("eList","true"),this.setState({name:"",amount:0,date:this.newstring,description:""}),e.preventDefault(),this.props.informNav(),this.props.informUpdate(this.state.amount,this.state.date,this.state.category,!1),localStorage.setItem("ghState","1"),this.setState({added:parseFloat(this.state.amount)}),fetch("https://upper-inukshuk-26953.herokuapp.com/expense_submit",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({name:this.state.name,amount:this.state.amount,date_of_expense:this.state.date,category:this.state.category,description:this.state.description,user:this.state.user})}).then((function(e){return e.text()})).then((function(e){console.log(e),t.props.informUpdate(t.state.amount,t.state.date,t.state.category,!0),t.props.informNav(),t.state.added=0,t.setState({displayText:e}),setTimeout((function(){t.setState({displayText:""})}),2e3)}))):this.setState({displayText:"Empty Fields"},(function(){t.conditionalCSS()}))}},{key:"handleChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(g.a)({},n,a),(function(){return document.getElementById(n).style.color="black"}))}},{key:"handleSelect",value:function(e){this.setState({category:e},(function(){return document.getElementById("category").style.color="black"})),this.selectedCat=e}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{id:"addForm",style:{width:"80vw",maxWidth:"700px",marginBottom:"2vh"},onSubmit:this.handleSubmit},r.a.createElement(M,{ref:"stat",totExp:parseFloat(this.props.totExp)+parseFloat(this.state.added),expCat:this.props.expCat}),r.a.createElement("h3",{style:{display:"flex",justifyContent:"center"}},"Key in your new expense"),r.a.createElement("label",{className:"lh-copy white f5 center",style:{display:"flex",justifyContent:"center",textTransform:"uppercase"}},this.state.displayText),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{id:"name"},"Name"),r.a.createElement("input",{type:"text",name:"name",className:"form-control form-rounded",placeholder:"Enter Expense",value:this.state.name,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{id:"amount"},"Amount"),r.a.createElement("input",{type:"number",step:"0.01",name:"amount",className:"form-control form-rounded",placeholder:"Enter amount",value:this.state.amount,onChange:this.handleChange})),r.a.createElement("div",{style:{display:"flex",flexdirection:"row",justifyContent:"space-around"}},r.a.createElement("div",{className:"form-group",style:{width:"100%"}},r.a.createElement("label",{id:"date",for:"date"},"Date of Expenditure:"," "),r.a.createElement("br",null),r.a.createElement("input",{type:"date",id:"date",className:"form-control form-rounded",name:"date",value:this.state.date,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group",style:{width:"100%"}},r.a.createElement("label",{id:"category"},"Purchase Category"),r.a.createElement("div",{style:{display:"flex",flexdirection:"row"}},r.a.createElement(E.a,{name:"category",value:this.state.category,onSelect:this.handleSelect,style:{flex:10}},r.a.createElement(E.a.Toggle,{style:{width:"100%",color:"black",background:"#FFAC9E",border:"#FFAC9E",boxShadow:"0 1.8px 2.2px rgba(0, 0, 0, 0.02), 0 4.3px 5.3px rgba(0, 0, 0, 0.028), 0 8.1px 10px rgba(0, 0, 0, 0.035), 0 14.5px 17.9px rgba(0, 0, 0, 0.042), 0 27.2px 33.4px rgba(0, 0, 0, 0.05), 0 65px 80px rgba(0, 0, 0, 0.07)"},variant:"primary",id:"dropdown-basic",className:"form-rounded"},this.selectedCat),r.a.createElement(E.a.Menu,{style:{width:"100%"}},this.state.allcategories.map((function(e){return r.a.createElement(E.a.Item,{eventKey:e},e)})))),r.a.createElement("button",{type:"button",class:"btn btn-warning form-rounded",onClick:this.handleClick,style:{background:"#FFAC9E",border:"#FFAC9E",display:"flex",width:"100%",flex:1,justifyContent:"center"}},"Edit")))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{id:"description"},"Description"),r.a.createElement("textarea",{type:"text",name:"description",className:"form-control form-rounded",placeholder:"Enter description",value:this.state.description,onChange:this.handleChange})),r.a.createElement("button",{style:{background:"#FFAC9E",color:"black",border:"#FFAC9E"},type:"submit",className:"btn btn-warning btn-block form-rounded",onSubmit:this.handleSubmit},"Submit")))}}]),a}(r.a.Component),A=a(50),B=a(109),D=a(257),P=a.n(D),R=a(259),_=a.n(R),W=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleClick=n.handleClick.bind(Object(c.a)(n)),n.state={columns:[{title:"Category",field:"category"}],data:[],currentUser:e.username,userMap:{Entertainment:"General"}},n}return Object(i.a)(a,[{key:"handleClick",value:function(e){this.props.callbackFromParent(!0)}},{key:"componentWillMount",value:function(){var e=this;fetch("https://upper-inukshuk-26953.herokuapp.com/category_data",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({username:this.state.currentUser})}).then((function(e){return e.json()})).then((function(t){var a=[],n={};for(r=0;r<t.length;r++)a[r]={category:t[r].category},n[t[r].category]=t[r].username;var r,s=a.length;for(r=0;r<s;r++)if("General"!=n[a[r]]){var o=a[r];a.splice(r,1),a.splice(0,0,o)}e.setState({data:a,userMap:n})}))}},{key:"render",value:function(){var e=this;return this.state.data.length>=0?r.a.createElement("div",{style:{width:"80vw",maxWidth:"700px"}},r.a.createElement(M,{totExp:this.props.totExp,expCat:this.props.expCat}),r.a.createElement("button",{style:{background:"#FFAC9E",color:"black",border:"#FFAC9E",marginBottom:"2vh"},type:"button",className:"btn btn-warning btn-block ",onClick:this.handleClick},"Back"),r.a.createElement(P.a,null,r.a.createElement("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),r.a.createElement(_.a,{style:{background:"#FFAC9E",marginBottom:"2vh"},title:"Categories",columns:this.state.columns,data:this.state.data,editable:{isEditable:function(t){return"General"!=e.state.userMap[t.category]},isDeletable:function(t){return"General"!=e.state.userMap[t.category]},onRowUpdate:function(t,a){return new Promise((function(n){setTimeout((function(){n(),a&&(e.setState((function(e){var n=Object(B.a)(e.data);return n[n.indexOf(a)]=t,Object(A.a)(Object(A.a)({},e),{},{data:n})})),fetch("https://upper-inukshuk-26953.herokuapp.com/category_edit",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({name:e.state.currentUser,old:a.category,new:t.category})}).then((function(e){return e.text()})).then((function(e){console.log(e)})))}),600)}))},onRowDelete:function(t){return new Promise((function(a){setTimeout((function(){a(),e.setState((function(e){var a=Object(B.a)(e.data);return a.splice(a.indexOf(t),1),Object(A.a)(Object(A.a)({},e),{},{data:a})})),fetch("https://upper-inukshuk-26953.herokuapp.com/category_delete",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({name:e.state.currentUser,category:t.category})}).then((function(e){return e.text()})).then((function(e){console.log(e)}))}),600)}))},onRowAdd:function(t){return new Promise((function(a){setTimeout((function(){a(),fetch("https://upper-inukshuk-26953.herokuapp.com/category_submit",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({name:e.state.currentUser,category:t.category})}).then((function(e){return e.text()})).then((function(a){"Category Added"==a?e.setState((function(e){var a=Object(B.a)(e.data);return a.push(t),Object(A.a)(Object(A.a)({},e),{},{data:a})})):(alert("Error"),e.setState((function(e){var t=Object(B.a)(e.data);return Object(A.a)(Object(A.a)({},e),{},{data:t})})))}))}),600)}))}}}))):r.a.createElement("div",{style:{width:"80vw",maxWidth:"700px",textAlign:"center"}},r.a.createElement(k.a,{animation:"border",role:"status",style:{textAlign:"center",marginTop:"50%",marginBottom:"30%"}},r.a.createElement("span",{className:"sr-only"},"Loading...")))}}]),a}(r.a.Component);function V(e){var t=e.totExp,a=e.expCat,n=e.eoc,s=e.func1,o=e.func2,l=e.func3,i=e.func4,c=e.user;return!0===n?r.a.createElement(L,{totExp:t,expCat:a,username:c,callbackFromParent:s,informUpdate:l,informNav:i}):r.a.createElement(W,{totExp:t,expCat:a,username:c,callbackFromParent:o})}var G=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).expenseUpdateNav=function(){n.props.callbackFromApp()},n.expenseUpdate=function(e,t,a,r){r?n.fetchCards():(n.refs.child.triggerUpdate(e,t,a),n.refreshCards(e,a))},n.expenseCallBack=function(e){n.setState({expenseOrCategory:!1}),localStorage.setItem("eoc","false")},n.categoryCallBack=function(e){n.setState({expenseOrCategory:!0}),localStorage.setItem("eoc","true")},n.state={expenseOrCategory:!0,currentUser:e.location.state.name,totExp:0,expCat:""},n.refreshCards=n.refreshCards.bind(Object(c.a)(n)),n.fetchCards=n.fetchCards.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"refreshCards",value:function(e,t){var a,n;null!==(s=JSON.parse(localStorage.getItem("statistics")))?(a=parseFloat(s[0])+parseFloat(e),n=s[1]):(a=parseFloat(e),n=t);var r=[];r[0]=a.toString(),r[1]=n,localStorage.setItem("statistics",JSON.stringify(r));var s=JSON.parse(localStorage.getItem("statistics"));this.setState({totExp:s[0],expCat:s[1]})}},{key:"fetchCards",value:function(){var e=this;console.log("inside stats"),fetch("https://upper-inukshuk-26953.herokuapp.com/stats_data",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({username:this.state.currentUser})}).then((function(e){return e.json()})).then((function(t){var a=[];a[0]=t[0],a[1]=t[1],localStorage.setItem("statistics",JSON.stringify(a)),e.setState({totExp:t[0],expCat:t[1]})}))}},{key:"componentDidMount",value:function(){if("false"===localStorage.getItem("eoc")&&this.setState({expenseOrCategory:!1}),null!==localStorage.getItem("statistics")&&"0"!=JSON.parse(localStorage.getItem("statistics"))[0]&&"false"===localStorage.getItem("eCard")){var e=JSON.parse(localStorage.getItem("statistics"));this.setState({totExp:e[0],expCat:e[1]},(function(){}))}else this.fetchCards(),localStorage.setItem("eCard","false")}},{key:"render",value:function(){return r.a.createElement("div",{style:{display:"flex",flexdirection:"row",justifyContent:"center",flexWrap:"wrap"}},r.a.createElement(J,{ref:"child",username:this.state.currentUser}),r.a.createElement(V,{totExp:this.state.totExp,expCat:this.state.expCat,eoc:this.state.expenseOrCategory,func1:this.expenseCallBack,func2:this.categoryCallBack,func3:this.expenseUpdate,func4:this.expenseUpdateNav,user:this.state.currentUser}))}}]),a}(n.Component),K=(a(919),a(37)),z=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={email:"",firstName:"",lastName:"",userName:"",password:"",cpassword:"",loginOrRegister:!0,displayText:"",redirect:null},"undefined"!=typeof e.location.state&&"signedOut"in e.location.state&&localStorage.setItem("auth","false"),n.handleChange=n.handleChange.bind(Object(c.a)(n)),n.conditionalCSS=n.conditionalCSS.bind(Object(c.a)(n)),n.handleLogin=n.handleLogin.bind(Object(c.a)(n)),n.handleRegister=n.handleRegister.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"conditionalCSS",value:function(e){var t=this,a=0;Object.keys(this.state).map((function(n){a<=6&&""===t.state[n]&&(1===e?document.getElementById(n).style.color="red":2===e&&(console.log("-----------------------------"),3!==a&&4!==a||(document.getElementById(n).style.color="red"))),a+=1}))}},{key:"handleLogin",value:function(e){var t=this;""!==this.state.userName&&""!==this.state.password?(console.log(this.state.userName),fetch("https://upper-inukshuk-26953.herokuapp.com/sign_in",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({username:this.state.userName,password:this.state.password})}).then((function(e){return e.text()})).then((function(e){console.log(e),"Signed in!"===e?(localStorage.clear(),localStorage.setItem("fatWalletUser",t.state.userName),localStorage.setItem("auth","true"),localStorage.setItem("eBar","true"),localStorage.setItem("ePie","true"),localStorage.setItem("eCard","true"),localStorage.setItem("eList","true"),t.setState({redirect:"/home"})):t.setState({displayText:e})}))):this.setState({displayText:"Empty Fields"},(function(){t.conditionalCSS(2)}))}},{key:"handleRegister",value:function(e){var t=this;console.log(this.state.userName);var a=this.state.password,n=this.state.cpassword;if(""!==this.state.email&&""!==this.state.firstName&&""!==this.state.lastName&&""!==this.state.userName&&""!==this.state.password&&""!==this.state.cpassword)return a!=n?(this.setState({displayText:"Passwords don't match. Sorry!"}),document.getElementById("password").style.color="red",void(document.getElementById("cpassword").style.color="red")):!this.state.email.includes("@")|!this.state.email.includes(".com")?(this.setState({displayText:"Invalid Email Address!"}),void(document.getElementById("email").style.color="red")):void fetch("https://upper-inukshuk-26953.herokuapp.com/add_user",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({username:this.state.userName,email:this.state.email,password:this.state.password,first_name:this.state.firstName,last_name:this.state.lastName})}).then((function(e){return e.text()})).then((function(e){console.log(e),"Added"===e?(localStorage.clear(),localStorage.setItem("fatWalletUser",t.state.userName),localStorage.setItem("auth","true"),console.log("here"),t.setState({redirect:"/home"})):t.setState({displayText:e})}));this.setState({displayText:"Empty Fields"},(function(){t.conditionalCSS(1)}))}},{key:"handleChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(g.a)({},n,a),(function(){return document.getElementById(n).style.color="black"}))}},{key:"render",value:function(){return this.state.redirect?r.a.createElement(K.a,{to:{pathname:this.state.redirect,state:{name:this.state.userName}}}):r.a.createElement("div",null,r.a.createElement("div",{class:"sidenav"},r.a.createElement("div",{class:"login-main-text",style:{display:"flex",flexdirection:"row",alignItems:"center"}},r.a.createElement("img",{class:"px-2",src:h.a,height:"100%",width:"150",alt:"cant find"}),r.a.createElement("div",{class:"title-padding"},r.a.createElement("h1",{class:"heading-style"},"Fat Wallet"),r.a.createElement("h6",null,"Login or register from here to access.")))),r.a.createElement("div",{class:"main"},r.a.createElement("div",{class:"col-md-7 col-sm-7"},r.a.createElement("div",null,r.a.createElement("form",{class:"form-padding"},r.a.createElement("label",{className:"lh-copy white f5",style:{textTransform:"uppercase"}},this.state.displayText),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{id:"userName"},"User Name"),r.a.createElement("input",{type:"text",name:"userName",value:this.state.name,class:"form-control form-rounded",placeholder:"User Name",onChange:this.handleChange})),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{id:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",value:this.state.name,class:"form-control form-rounded",placeholder:"Password",onChange:this.handleChange})),r.a.createElement("button",{type:"button",class:"btn btn-black form-rounded",onClick:this.handleLogin},"Login"),r.a.createElement("div",{class:"form-group"},r.a.createElement("br",null),r.a.createElement("p",null,"Do not have an account yet? Please fill in these additional details.")),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{id:"email"},"Email"),r.a.createElement("input",{type:"text",name:"email",value:this.state.name,class:"form-control form-rounded",placeholder:"Email",onChange:this.handleChange})),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{id:"firstName"},"First Name"),r.a.createElement("input",{type:"text",name:"firstName",value:this.state.name,class:"form-control form-rounded",placeholder:"First Name",onChange:this.handleChange})),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{id:"lastName"},"Last Name"),r.a.createElement("input",{type:"text",name:"lastName",value:this.state.name,class:"form-control  form-rounded",placeholder:"Last Name",onChange:this.handleChange})),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{id:"cpassword"},"Confirm Password"),r.a.createElement("input",{type:"password",name:"cpassword",value:this.state.name,class:"form-control form-rounded",placeholder:"Password",onChange:this.handleChange})),r.a.createElement("button",{type:"button",class:"btn btn-black form-rounded",onClick:this.handleRegister},"Register"))))))}}]),a}(n.Component),H=(a(920),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={columns:[{title:"Name",field:"name"},{title:"Amount",field:"amount",type:"numeric"},{title:"Date of Expense",field:"dateOfExpense",type:"date"},{title:"Category",field:"category"},{title:"Description",field:"description"}],data:[],currentUser:e.location.state.name},n}return Object(i.a)(a,[{key:"informNav",value:function(){this.props.callbackFromApp()}},{key:"componentDidMount",value:function(){var e=this;if(null!==localStorage.getItem("expenseTableVal")&&"false"===localStorage.getItem("eList")){var t=JSON.parse(localStorage.getItem("expenseTableVal")),a=JSON.parse(localStorage.getItem("expenseTableLength"));this.setState({data:t}),this.setState({tableState:a})}else fetch("https://upper-inukshuk-26953.herokuapp.com/expense_data",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({username:this.state.currentUser})}).then((function(e){return e.json()})).then((function(t){var a,n=[];for(a=0;a<t.length;a++)n[a]={name:t[a].name,amount:t[a].amount,dateOfExpense:t[a].date,category:t[a].category_name,description:t[a].description,id:t[a].id,tableState:-1};localStorage.setItem("expenseTableVal",JSON.stringify(n)),localStorage.setItem("expenseTableLength",JSON.stringify(e.state.data.length)),localStorage.setItem("eList","false"),e.setState({data:n}),e.setState({tableState:e.state.data.length})}))}},{key:"render",value:function(){var e=this;return this.state.tableState>=0?r.a.createElement("div",{style:{padding:"5%"}},r.a.createElement(P.a,null,r.a.createElement("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),r.a.createElement(_.a,{style:{background:"#FFAC9E"},title:"Expense History",columns:this.state.columns,data:this.state.data,editable:{onRowUpdate:function(t,a){return new Promise((function(n){e.informNav();var r=JSON.parse(localStorage.getItem("statistics")),s=parseFloat(r[0])+(a.amount-t.amount),o=[];o[0]=s.toString(),o[1]=r[1],localStorage.setItem("statistics",JSON.stringify(o)),localStorage.setItem("eCard","true"),localStorage.setItem("eBar","true"),localStorage.setItem("ePie","true"),localStorage.setItem("eList","true"),setTimeout((function(){if(n(),a){var r=!1;""!==t.name&&""!==t.category&&""!==t.description&&""!==t.amount||(r=!0),r?(alert("Empty field!"),e.setState((function(e){var t=Object(B.a)(e.data);return Object(A.a)(Object(A.a)({},e),{},{data:t})}))):(e.setState((function(e){var n=Object(B.a)(e.data);return n[n.indexOf(a)]=t,Object(A.a)(Object(A.a)({},e),{},{data:n})}),(function(){localStorage.setItem("expenseTableVal",JSON.stringify(e.state.data)),localStorage.setItem("expenseTableLength",JSON.stringify(e.state.data.length))})),fetch("https://upper-inukshuk-26953.herokuapp.com/expense_edit",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({username:e.state.currentUser,id:a.id,date:t.dateOfExpense,amount:t.amount,category:t.category,description:t.description})}).then((function(e){return e.text()})).then((function(t){e.informNav()})))}}),600)}))},onRowDelete:function(t){return new Promise((function(a){e.informNav();var n=JSON.parse(localStorage.getItem("statistics")),r=parseFloat(n[0])-t.amount,s=[];s[0]=r.toString(),s[1]=n[1],localStorage.setItem("statistics",JSON.stringify(s)),localStorage.setItem("eCard","true"),localStorage.setItem("eBar","true"),localStorage.setItem("ePie","true"),setTimeout((function(){a(),e.setState((function(e){var a=Object(B.a)(e.data);return a.splice(a.indexOf(t),1),Object(A.a)(Object(A.a)({},e),{},{data:a})}),(function(){localStorage.setItem("expenseTableVal",JSON.stringify(e.state.data)),localStorage.setItem("expenseTableLength",JSON.stringify(e.state.data.length))})),fetch("https://upper-inukshuk-26953.herokuapp.com/expense_delete",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({id:t.id})}).then((function(e){return e.text()})).then((function(t){e.informNav(),console.log(t)}))}),600)}))}}}))):r.a.createElement(k.a,{className:"centered",animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))}}]),a}(r.a.Component)),Y=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={navStateMain:!0,navStateExpense:!0},n.tellNavExpense=n.tellNavExpense.bind(Object(c.a)(n)),n.tellNavMain=n.tellNavMain.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"tellNavExpense",value:function(){this.setState({navStateExpense:!this.state.navStateExpense})}},{key:"tellNavMain",value:function(){this.setState({navStateMain:!this.state.navStateMain})}},{key:"render",value:function(){var e=this;return r.a.createElement(p.a,{basename:"/fat-wallet-front"},r.a.createElement("div",null,r.a.createElement("link",{href:"https://fonts.googleapis.com/css?family=Lato:300,400,700",rel:"stylesheet",type:"text/css"}),r.a.createElement(K.d,null,r.a.createElement(K.b,{path:"/",exact:!0,component:z}),r.a.createElement(K.b,{path:"/home",render:function(t){return null===localStorage.getItem("auth")||"false"===localStorage.getItem("auth")?r.a.createElement(z,t):"undefined"!=typeof t.location.state?r.a.createElement("div",null,r.a.createElement(f,Object.assign({navState:e.state.navStateMain},t)),r.a.createElement(G,Object.assign({callbackFromApp:e.tellNavMain},t))):r.a.createElement(K.a,{to:{pathname:"/home",state:{name:localStorage.getItem("fatWalletUser")}}})}}),r.a.createElement(K.b,{path:"/expenses",render:function(t){return null===localStorage.getItem("auth")||"false"===localStorage.getItem("auth")?r.a.createElement(z,t):"undefined"!=typeof t.location.state?r.a.createElement("div",null,r.a.createElement(f,Object.assign({navState:e.state.navStateExpense},t)),r.a.createElement(H,Object.assign({callbackFromApp:e.tellNavExpense},t))):r.a.createElement(K.a,{to:{pathname:"/expenses",state:{name:localStorage.getItem("fatWalletUser")}}})}}))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[583,1,2]]]);
//# sourceMappingURL=main.65fbe1da.chunk.js.map